<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <!--<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>-->
    <title>Exmpale2</title>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <style>
        div#output {
            color: black;
            background-color: lightblue;
        }
    </style>
</head>
<body>
    <div id="output"></div>
    
    <script>
        
        function sleep (ms) { // TODO: Move to deps/js/common.js
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        
        async function demo () { // асинхронная функция
            let maxT = 60;
            for (let i=0; i<maxT; ++i) {
                console.log('Waiting '+i+' seconds...');
                $('#output').html('Задержка происходит в цикле, приблизительно прошло секунд: '+i+'/'+maxT);
                await sleep(1*1000); // await (синхронное ожидание вызова) применим только к Promise и async функциям
            }
            console.log('Done');
        }
        
        $(document).ready(function () {
            console.log("document loaded");
            demo(); // но асинхронные функции можно вызывать напрямую, но такой вызов асинхронный
        });
 
 
 
//    $(window).on("load", function () {
//        console.log("window loaded");
//    });
    </script>
</body>
</html>
